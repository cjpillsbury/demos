try{self["workbox:window:5.1.3"]&&_()}catch(r){}function L(r,o){return new Promise(function(n){var i=new MessageChannel();i.port1.onmessage=function(h){n(h.data)},r.postMessage(o,[i.port2])})}function b(r,o){for(var n=0;n<o.length;n++){var i=o[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}try{self["workbox:core:5.1.3"]&&_()}catch(r){}var y=function(){var r=this;this.promise=new Promise(function(o,n){r.resolve=o,r.reject=n})};function E(r,o){var n=location.href;return new URL(r,n).href===new URL(o,n).href}var d=function(r,o){this.type=r,Object.assign(this,o)};function p(r,o,n){return n?o?o(r):r:(r&&r.then||(r=Promise.resolve(r)),o?r.then(o):r)}function j(){}var U=function(r){var o,n;function i(c,v){var e,t;return v===void 0&&(v={}),(e=r.call(this)||this).t={},e.i=0,e.o=new y(),e.u=new y(),e.s=new y(),e.v=0,e.h=new Set(),e.l=function(){var s=e.g,a=s.installing;e.i>0||!E(a.scriptURL,e.m)||performance.now()>e.v+6e4?(e.P=a,s.removeEventListener("updatefound",e.l)):(e.p=a,e.h.add(a),e.o.resolve(a)),++e.i,a.addEventListener("statechange",e.k)},e.k=function(s){var a=e.g,u=s.target,g=u.state,m=u===e.P,k=m?"external":"",w={sw:u,originalEvent:s};!m&&e.j&&(w.isUpdate=!0),e.dispatchEvent(new d(k+g,w)),g==="installed"?e.O=self.setTimeout(function(){g==="installed"&&a.waiting===u&&e.dispatchEvent(new d(k+"waiting",w))},200):g==="activating"&&(clearTimeout(e.O),m||e.u.resolve(u))},e.R=function(s){var a=e.p;a===navigator.serviceWorker.controller&&(e.dispatchEvent(new d("controlling",{sw:a,originalEvent:s,isUpdate:e.j})),e.s.resolve(a))},e.S=(t=function(s){var a=s.data,u=s.source;return p(e.getSW(),function(){e.h.has(u)&&e.dispatchEvent(new d("message",{data:a,sw:u,originalEvent:s}))})},function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];try{return Promise.resolve(t.apply(this,s))}catch(u){return Promise.reject(u)}}),e.m=c,e.t=v,navigator.serviceWorker.addEventListener("message",e.S),e}n=r,(o=i).prototype=Object.create(n.prototype),o.prototype.constructor=o,o.__proto__=n;var h,l,f=i.prototype;return f.register=function(c){var v=(c===void 0?{}:c).immediate,e=v!==void 0&&v;try{var t=this;return function(s,a){var u=s();return u&&u.then?u.then(a):a(u)}(function(){if(!e&&document.readyState!=="complete")return P(new Promise(function(s){return window.addEventListener("load",s)}))},function(){return t.j=Boolean(navigator.serviceWorker.controller),t.U=t.B(),p(t.L(),function(s){t.g=s,t.U&&(t.p=t.U,t.u.resolve(t.U),t.s.resolve(t.U),t.U.addEventListener("statechange",t.k,{once:!0}));var a=t.g.waiting;return a&&E(a.scriptURL,t.m)&&(t.p=a,Promise.resolve().then(function(){t.dispatchEvent(new d("waiting",{sw:a,wasWaitingBeforeRegister:!0}))}).then(function(){})),t.p&&(t.o.resolve(t.p),t.h.add(t.p)),t.g.addEventListener("updatefound",t.l),navigator.serviceWorker.addEventListener("controllerchange",t.R,{once:!0}),t.g})})}catch(s){return Promise.reject(s)}},f.update=function(){try{return this.g?P(this.g.update()):void 0}catch(c){return Promise.reject(c)}},f.getSW=function(){try{return this.p!==void 0?this.p:this.o.promise}catch(c){return Promise.reject(c)}},f.messageSW=function(c){try{return p(this.getSW(),function(v){return L(v,c)})}catch(v){return Promise.reject(v)}},f.B=function(){var c=navigator.serviceWorker.controller;return c&&E(c.scriptURL,this.m)?c:void 0},f.L=function(){try{var c=this;return function(v,e){try{var t=v()}catch(s){return e(s)}return t&&t.then?t.then(void 0,e):t}(function(){return p(navigator.serviceWorker.register(c.m,c.t),function(v){return c.v=performance.now(),v})},function(v){throw v})}catch(v){return Promise.reject(v)}},h=i,(l=[{key:"active",get:function(){return this.u.promise}},{key:"controlling",get:function(){return this.s.promise}}])&&b(h.prototype,l),i}(function(){function r(){this.M=new Map()}var o=r.prototype;return o.addEventListener=function(n,i){this._(n).add(i)},o.removeEventListener=function(n,i){this._(n).delete(i)},o.dispatchEvent=function(n){n.target=this;var i=this._(n.type),h=Array.isArray(i),l=0;for(i=h?i:i[Symbol.iterator]();;){var f;if(h){if(l>=i.length)break;f=i[l++]}else{if((l=i.next()).done)break;f=l.value}f(n)}},o._=function(n){return this.M.has(n)||this.M.set(n,new Set()),this.M.get(n)},r}());function P(r,o){if(!o)return r&&r.then?r.then(j):Promise.resolve()}export{U as Workbox,L as messageSW};
