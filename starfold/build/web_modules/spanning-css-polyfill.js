function j(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,o=new Array(r);e<r;e++)o[e]=n[e];return o}var y=function(){try{var n=function(){if(!E)return E=!0,Promise.resolve(Promise.resolve(!1)).then(function(r){E=r,window[d].dispatchEvent(new Event("change"))})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(r){return Promise.reject(r)}},d="__foldables__",E=!1,I=function(){function n(){var e=this;if(window[d]!==void 0)return window[d];var o=document.createDocumentFragment();this.addEventListener=o.addEventListener.bind(o),this.removeEventListener=o.removeEventListener.bind(o),this.dispatchEvent=function(t){if(t.type==="change"){var i="on"+t.type;return typeof e[i]=="function"&&e[i](t),o.dispatchEvent(t)}},window.addEventListener("message",function(t){t.data.action==="update"&&Object.assign(e,t.data.value)}),window.addEventListener("resize",function(){return function(t,i){var a;return function(){var l=arguments,s=this;clearTimeout(a),a=setTimeout(function(){return t.apply(s,l)},200)}}(y())})}var r;return n.prototype.getSegments=function(){if(this.spanning==="none")return[{left:0,top:0,width:window.innerWidth,height:window.innerHeight}];if(this.spanning==="single-fold-horizontal"){var e=(window.innerHeight-this.browserShellSize)/2,o=window.innerWidth;return[{top:0,left:0,width:o,height:e-this.foldSize/2},{top:e-this.foldSize/2,height:this.foldSize,left:0,width:o},{top:e+this.foldSize/2,left:0,width:o,height:e-this.foldSize/2}]}if(this.spanning==="single-fold-vertical"){var t=window.innerWidth/2-this.foldSize/2,i=window.innerHeight;return[{top:0,left:0,width:t,height:i},{top:0,height:i,left:t,width:this.foldSize},{top:0,left:window.innerWidth/2+this.foldSize/2,width:t,height:i}]}},(r=[{key:"spanning",get:function(){return sessionStorage.getItem(d+"-spanning")||"none"},set:function(e){if(!["none","single-fold-horizontal","single-fold-vertical"].includes(e))throw new TypeError(e);sessionStorage.setItem(d+"-spanning",e),y()}},{key:"foldSize",get:function(){return+sessionStorage.getItem(d+"-fold-size")||0},set:function(e){if(!(Number(e)>=0))throw new TypeError(e);sessionStorage.setItem(d+"-fold-size",e),y()}},{key:"browserShellSize",get:function(){return+sessionStorage.getItem(d+"-browser-shell-size")||0},set:function(e){if(!(Number(e)>=0))throw new TypeError(e);sessionStorage.setItem(d+"-browser-shell-size",e),y()}}])&&function(e,o){for(var t=0;t<o.length;t++){var i=o[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(n.prototype,r),n}();window[d]=new I(),window.getWindowSegments=function(){var n=window[d].getSegments();return n.length===1?n:[n[0],n[2]]};var N=/\((.*?)\)/gi,W=/@media[^\(]+/gi;function L(n,r){return n.replace(new RegExp("(\\s*)(@media.*?\\bspanning\\b[^{]+)\\{([\\s\\S]+?\\})(\\s*)\\}","gi"),r)}function O(n){var r,e=function(t){var i,a=new RegExp("(\\s*)(@media.*?\\bspanning\\b[^{]+)\\{([\\s\\S]+?\\})(\\s*)\\}","gi");if(typeof t.matchAll=="function")i=Array.from(t.matchAll(a));else{for(i=[];i[i.length]=a.exec(t););i.length--}return i}(n),o=((r={})["single-fold-horizontal"]="",r["single-fold-vertical"]="",r.none="",r);return e.forEach(function(t){var i=t[1],a=t[2],l=t[3],s=t[4],f="none";a.indexOf("single-fold-horizontal")>-1&&(f="single-fold-horizontal"),a.indexOf("single-fold-vertical")>-1&&(f="single-fold-vertical");var u=a.match(W)||[],h=function(g){return g.match(N)||[]}(a);h=h.filter(function(g){return!g.includes("spanning")}).join(" and "),o[f]+=""+i+u+h+"{"+l+s+"}"}),o}var b=window.matchMedia("(spanning: single-fold-horizontal)").matches||window.matchMedia("(spanning: single-fold-vertical)").matches||window.matchMedia("(spanning: none)").matches||!1;console.info("CSS Spanning Media Queries are supported? "+b);var _,z=new I();if(!b){var x=Array.from(document.querySelectorAll('link[rel="stylesheet"], style'));(_=x,Promise.all(_.map(function(n){return n.href?fetch(n.href).then(function(r){return r.text()}):n.textContent}))).then(function(n){var r=new DocumentFragment();n.forEach(function(e,o){for(var t=L(e,""),i=O(e),a=x[o].href||"inline",l=0,s=Object.entries(i);l<s.length;l++){var f=s[l];p[f[0]]+="/* origin: "+a+" */"+f[1]}var u=document.createElement("style");u.setAttribute("data-css-origin",a),u.textContent=t,r.appendChild(u)}),x.forEach(function(e){return e.parentElement!=null&&e.parentElement.removeChild(e)}),document.head.appendChild(r),P()})}var p={"single-fold-horizontal":"","single-fold-vertical":"",none:""};function R(n,r){if(b)return n;var e=L(n,""),o=O(n);r&&(p[r]={"single-fold-horizontal":"","single-fold-vertical":"",none:""});for(var t=r?p[r]:p,i=r?"":"/* origin: inline */",a=0,l=Object.entries(o);a<l.length;a++){var s=l[a];t[s[0]]+=""+i+s[1]}return t["non-spanning"]=e,e}function P(n){b||(T(n),z.addEventListener("change",function(){return T(n)}))}function T(n){for(var r=z,e=n?p[n.nodeName.toLowerCase()][r.spanning]:p[r.spanning],o=n?p[n.nodeName.toLowerCase()]["non-spanning"]:null,t=z.getSegments(),i=0,a=Object.entries(t.length===1?{}:t[1]);i<a.length;i++){var l=a[i];s=l[1]+"px",e=e.replace(new RegExp("env\\(\\s*fold-"+l[0]+"\\s*\\)","gi"),s)}var s,f="__foldables_sheet__",u=function(g,k){for(var A,M=function(v,H){var w;if(typeof Symbol=="undefined"||v[Symbol.iterator]==null){if(Array.isArray(v)||(w=function(c,q){if(c){if(typeof c=="string")return j(c,void 0);var m=Object.prototype.toString.call(c).slice(8,-1);return m==="Object"&&c.constructor&&(m=c.constructor.name),m==="Map"||m==="Set"?Array.from(c):m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?j(c,void 0):void 0}}(v))){w&&(v=w);var C=0;return function(){return C>=v.length?{done:!0}:{done:!1,value:v[C++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(w=v[Symbol.iterator]()).next.bind(w)}(g.querySelectorAll("."+f));!(A=M()).done;)A.value.remove();var S=document.createElement("style");S.className=f,S.textContent=k,g===document?document.head.appendChild(S):g.appendChild(S)};if(n){var h=n.shadowRoot;"adoptedStyleSheets"in h&&h.adoptedStyleSheets.length>0?h.adoptedStyleSheets[0].replace(o+e):u(h,e)}else u(document,e)}export{R as adjustCSS,P as observe};
